(this["webpackJsonpto-do-app"]=this["webpackJsonpto-do-app"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),i=n(12),a=n.n(i),s=(n(18),n(3)),r=n(13),l=n(2),d=(n(19),n(5)),u=(n(20),n(0)),j=function(e){var t=e.currentTodo,n=e.setCurrentTodo,c=e.prompt,o=e.content,i=e.isEditable,a=e.cancelAction,s=e.confirmAction,r=e.confirmText;return Object(u.jsx)("div",{className:"modal",children:Object(u.jsxs)("div",{className:"modal-content",children:[Object(u.jsx)("div",{className:"modal-prompt",children:c}),!i&&Object(u.jsx)("div",{className:"modal-text",children:o}),i&&Object(u.jsx)("input",{className:"edit-task",type:"text",onChange:function(e){n(Object(d.a)(Object(d.a)({},t),{},{title:e.target.value}))},id:t._id,name:t.title,value:o}),Object(u.jsxs)("div",{className:"button-wrapper",children:[Object(u.jsx)("button",{onClick:a,children:"Cancel"}),Object(u.jsx)("button",{className:"negative",onClick:s,children:r})]})]})})},b=(n(22),function(){var e=(new Date).getHours();return e<12?"Good morning!":e>=12&&e<17?"Good afternoon!":"Good evening!"}),h=function(e){var t=e.completeListLength,n=e.incompleteListLength;return Object(u.jsx)(u.Fragment,{children:0!==t&&0===n?Object(u.jsxs)("div",{className:"summary",children:[Object(u.jsx)("div",{className:"summary-greeting",children:"Congratulations!"}),"You are done with your list."]}):Object(u.jsxs)("div",{className:"summary",children:[Object(u.jsx)("div",{className:"summary-greeting",children:b()}),Object(u.jsxs)("div",{className:"summary-item-details",children:[0===t&&0===n&&"You haven't added any tasks yet.",n>=1&&"You have ".concat(n," ").concat(n>1?"items":"item"," left on your list.")]})]})})},m=(n(23),function(e){var t=e.handleAdd,n=e.newTodoTitle,c=e.setNewTodoTitle;return Object(u.jsxs)("div",{className:"new-task-wrapper",children:[Object(u.jsx)("label",{htmlFor:"new-todo",children:Object(u.jsx)("input",{type:"text",name:"todo",placeholder:"Describe your task",id:"new-todo",value:n,onChange:function(e){return c(e.target.value)}})}),Object(u.jsx)("button",{className:"positive add-todo",onClick:function(){""!==n&&(t({title:n.trim()}),c(""))},disabled:""===n,children:"Add"})]})}),p=(n(24),function(e){var t=e.todos,n=e.handleEdit,o=e.handleAdd,i=e.handleDelete,a=e.handleDeleteCompletedTodos,r=Object(c.useState)(""),l=Object(s.a)(r,2),b=l[0],p=l[1],f=Object(c.useState)(!1),O=Object(s.a)(f,2),x=O[0],v=O[1],g=Object(c.useState)(!1),k=Object(s.a)(g,2),N=k[0],T=k[1],y=Object(c.useState)(!1),C=Object(s.a)(y,2),w=C[0],S=C[1],D=Object(c.useState)({}),E=Object(s.a)(D,2),L=E[0],A=E[1],F=t.filter((function(e){return!e.completed})),I=t.filter((function(e){return e.completed}));return Object(u.jsxs)(u.Fragment,{children:[x&&Object(u.jsx)(j,{currentTodo:L,setCurrentTodo:A,isEditable:!0,prompt:"Edit task",content:L.title,cancelAction:function(){v(!1),A({})},confirmAction:function(){n(Object(d.a)(Object(d.a)({},L),{},{title:L.title.trim()})),v(!1),A({})},confirmText:"Save"}),N&&Object(u.jsx)(j,{prompt:'Delete "'.concat(L.title,'" task?'),content:"This cannot be undone.",cancelAction:function(){T(!1),A({})},confirmAction:function(){T(!1),i(L._id),A({})},confirmText:"Delete"}),w&&Object(u.jsx)(j,{prompt:"Delete ".concat(I.length," completed ").concat(1===I.length?"task":"tasks","?"),content:"This cannot be undone.",cancelAction:function(){S(!1)},confirmAction:function(){a(),S(!1)},confirmText:"Delete ".concat(1===I.length?"task":"tasks")}),Object(u.jsx)(h,{completeListLength:I.length,incompleteListLength:F.length}),Object(u.jsx)(m,{handleAdd:o,newTodoTitle:b,setNewTodoTitle:p}),Object(u.jsx)("div",{className:"uncompleted-todos",children:F.map((function(e){return Object(u.jsxs)("div",{className:"todo-wrapper",children:[Object(u.jsxs)("label",{htmlFor:e.title,className:e.completed?"completed-task":"",children:[Object(u.jsx)("input",{type:"checkbox",checked:e.completed,onChange:function(){n(Object(d.a)(Object(d.a)({},e),{},{completed:!e.completed})),x&&v(!1)},id:e.title,name:e.title,value:e.title}),Object(u.jsx)("span",{className:"checkmark",children:e.completed}),Object(u.jsx)("span",{className:"title",children:e.title})]}),Object(u.jsxs)("div",{className:"editing-wrapper",children:[Object(u.jsx)("button",{title:"Edit task",disabled:e.completed,onClick:function(){A(e),v(!0)},children:"Edit"}),Object(u.jsx)("button",{title:"Delete task",className:"positive delete-button",onClick:function(){A(e),T(L)},children:"X"})]})]},e._id)}))}),Object(u.jsx)("div",{className:"completed-todos",children:I.map((function(e){return Object(u.jsxs)("div",{className:"todo-wrapper",children:[Object(u.jsxs)("label",{htmlFor:e.title,className:e.completed?"completed-task":"",children:[Object(u.jsx)("input",{type:"checkbox",checked:e.completed,onChange:function(){n(Object(d.a)(Object(d.a)({},e),{},{completed:!e.completed})),x&&v(!1)},id:e.title,name:e.title,value:e.title}),Object(u.jsx)("span",{className:"checkmark",children:e.completed}),!(x&&L._id===e._id)&&Object(u.jsx)("span",{className:"title",children:e.title})]}),Object(u.jsx)("button",{title:"Delete task",className:"positive delete-button",onClick:function(){A(e),T(L)},children:"X"})]},e._id)}))}),Object(u.jsx)("div",{className:"delete-all-wrapper",children:Object(u.jsx)("button",{className:"negative delete-all-button",title:"Delete all completed tasks",disabled:I.length<1,onClick:function(){S(!0)},children:"Delete all completed tasks"})})]})}),f=(n(25),function(e){return Object(u.jsxs)("div",{className:"loading",children:[Object(u.jsx)("div",{children:"Loading"}),Object(u.jsx)("div",{className:"loading-dots"})]})}),O=n(6),x=n.n(O),v=n(9);n(10).config();var g=function(e){var t=e.setToken,n=Object(c.useState)(),o=Object(s.a)(n,2),i=o[0],a=o[1],r=function(){var e=Object(v.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat("https://tori-tiny-todo.herokuapp.com","/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(v.a)(x.a.mark((function e(n){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,r({password:i});case 3:c=e.sent,t(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Login"}),Object(u.jsxs)("form",{onSubmit:l,children:[Object(u.jsx)("input",{type:"password",onChange:function(e){return a(e.target.value)}}),Object(u.jsx)("button",{title:"Log in",type:"submit",children:"Submit"})]})]})},k="tiny-todo-token";n(10).config();var N="https://tori-tiny-todo.herokuapp.com";var T=function(){var e=function(){var e=Object(c.useState)(function(){var e=localStorage.getItem(k),t=JSON.parse(e);return null===t||void 0===t?void 0:t.token}()),t=Object(s.a)(e,2),n=t[0],o=t[1];return{setToken:function(e){localStorage.setItem(k,JSON.stringify(e)),o(e.token)},deleteToken:function(e){localStorage.removeItem(k),o()},token:n}}(),t=e.setToken,n=e.deleteToken,o=e.token;Object(c.useEffect)((function(){fetch("".concat(N,"/todos")).then((function(e){return e.json()})).then((function(e){O(!0),y(e)})).catch((function(e){console.log("Error: ",e),j("There was a problem retrieving your to-do list.")}))}),[]);var i=Object(c.useState)(null),a=Object(s.a)(i,2),d=a[0],j=a[1],b=Object(c.useState)(!1),h=Object(s.a)(b,2),m=h[0],O=h[1],x=Object(c.useState)([]),v=Object(s.a)(x,2),T=v[0],y=v[1];function C(e){fetch("".concat(N,"/todos"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return y(e)}))}function w(e){fetch("".concat(N,"/todos"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,title:e.title,completed:e.completed})}).then((function(e){return e.json()})).then((function(e){return y(e)}))}function S(e){fetch("".concat(N,"/todos/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return y(e)}))}function D(){fetch("".concat(N,"/todos/completed"),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return y(e)}))}var E=function(){return Object(u.jsxs)(u.Fragment,{children:[!m&&!d&&Object(u.jsx)(f,{}),m&&!d&&T!==[]&&Object(u.jsx)(p,{todos:T,handleEdit:C,handleAdd:w,handleDelete:S,handleDeleteCompletedTodos:D}),Object(u.jsx)("div",{className:"logout-wrapper",children:Object(u.jsx)("button",{onClick:function(){return n()},children:"Logout"})}),d&&d]})};return o?Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(r.a,{children:Object(u.jsx)(l.c,{children:Object(u.jsx)(l.a,{path:"/to-do-app-frontend/",element:Object(u.jsx)(E,{})})})})}):Object(u.jsx)(g,{setToken:t})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),i(e),a(e)}))};a.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(T,{})}),document.getElementById("root")),y()}},[[29,1,2]]]);
//# sourceMappingURL=main.b7f24279.chunk.js.map